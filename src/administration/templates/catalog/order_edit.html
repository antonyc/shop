{% extends "administration_base.html" %}
{% load url from future %}{% load util_tags %}{% load i18n %}{% load humanize %}
{% block script %}
<script type="text/javascript" src="{{ STATIC_URL }}{% load_block_file 'order_item' 'order_item.js' %}"></script>
{% endblock %}
{% block contents %}
    <h2>{% trans 'Order' %}</h2>
    {% trans 'Author' %} {{ order.user }}
    <ul>
        {% for order_item in order.orderitem_set.all %}
            <li class="{% class_block 'edit_order_item' %}">{{ order_item.item.name }}
                <div class="{% class_block 'edit_order_item__quantity' %}">
                    <form action="{% url 'edit_order_item' id=order_item.id %}" method="POST">{% csrf_token %}
                        <label>{% trans 'quantity' %} <input type="text" name="quantity"
                                                             value="{{ order_item.quantity }}"/></label>
                        <input type="submit" value="{% trans 'change' %}"/>
                    </form>
                </div>

                <div class="{% class_block 'edit_order_item__delete' %}">
                    <form action="{% url 'delete_order_item' id=order_item.id %}" method="POST">{% csrf_token %}
                        <input type="submit" value="{% trans 'delete' %}"/>
                    </form>
                </div>
            </li>
        {% endfor %}
    </ul>
    <div class="{% class_block 'no_second_submit' %}">
    <form action="{% url 'order_status' id=order.id  %}" method="POST">{% csrf_token %}
        <input type="hidden" value="{{ delete_status }}" name="status"/>
        <input type="submit" value="{% trans 'delete order' %}"/>
        <span class="spinner"><img src="{{ STATIC_URL }}images/ajax-loader.gif"  alt="" /></span>
    </form>
    </div>
{% endblock %}